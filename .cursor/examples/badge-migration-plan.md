# Migration Plan: Badge

> Generated by Research Agent | Example from real Badge component

## Summary

| Field | Value |
|-------|-------|
| **Tier** | simple |
| **Reference Template** | Counter (display component, CVA, no interaction) |
| **Estimated Files** | 8 new, 2 updated |
| **Blockers** | none (Box workaround: use `<div>`, Icon: placeholder prop) |

## File Plan

| # | Path | Action | Notes |
|---|------|--------|-------|
| 1 | `blade-svelte/src/components/Badge/types.ts` | create | BadgeProps with JSDoc, Snippet children |
| 2 | `blade-svelte/src/components/Badge/Badge.svelte` | create | Single-layer (simple enough to skip Base layer) |
| 3 | `blade-svelte/src/components/Badge/Badge.stories.svelte` | create | 5 stories matching React |
| 4 | `blade-svelte/src/components/Badge/index.ts` | create | Barrel export |
| 5 | `blade-core/src/styles/Badge/badge.module.css` | create | CSS module with CVA classes |
| 6 | `blade-core/src/styles/Badge/badge.ts` | create | CVA wrapper + helper functions |
| 7 | `blade-core/src/styles/index.ts` | update | Export badge styles |
| 8 | `blade-svelte/src/components/index.ts` | update | Export Badge component |

**Decision:** Badge is simple enough (6 props, no interaction states, display-only) that a single-layer architecture is sufficient. No Base wrapper needed.

## Prop Mapping

| React Prop | Svelte Prop | Type Change | Default | Notes |
|-----------|-------------|-------------|---------|-------|
| `children: StringChildrenType` | `children: Snippet \| string` | yes | — | Required. Validate non-empty. |
| `color: FeedbackColors \| 'primary'` | `color?: BadgeColor` | rename type | `'neutral'` | Same values: neutral, positive, negative, notice, information, primary |
| `emphasis: SubtleOrIntense` | `emphasis?: BadgeEmphasis` | rename type | `'subtle'` | Same values: subtle, intense |
| `size: string union` | `size?: BadgeSize` | rename type | `'medium'` | Same values: xsmall, small, medium, large |
| `icon: IconComponent` | `icon?: IconComponent` | no | — | Placeholder until Icon component migrated |
| `testID: string` | `testID?: string` | no | — | Passed to metaAttribute() |

## CSS Plan

| Field | Value |
|-------|-------|
| **New CSS module** | yes |
| **Module path** | `blade-core/src/styles/Badge/badge.module.css` |

**CVA Variants:**

| Variant | Options | CSS Classes |
|---------|---------|------------|
| size | xsmall, small, medium, large | `.xsmall`, `.small`, `.medium`, `.large` |
| color | neutral, positive, negative, notice, information, primary | `.neutral`, `.positive`, `.negative`, `.notice`, `.information`, `.primary` |
| emphasis | subtle, intense | `.subtle`, `.intense` |

**Token Variables Used:**
- `var(--border-radius-medium)` — badge border radius
- `var(--spacing-N)` — horizontal padding per size
- `var(--colors-feedback-background-{color}-{emphasis})` — background colors
- `var(--colors-feedback-text-{color}-intense)` — text colors (subtle emphasis)
- `var(--colors-surface-text-staticWhite-normal)` — text color (intense emphasis)

**Disabled Strategy:** N/A — Badge has no disabled state.

## Interaction States

- [ ] Hover — no
- [ ] Focus — no
- [ ] Pressed/Active — no
- [ ] Disabled — no
- [ ] Uses `useInteraction()` — no

## Key Implementation Notes

1. Color logic: React uses `getColorProps()` to derive icon/text/background colors from `color` + `emphasis`. In Svelte, this maps to CVA compound variants or helper functions in `badge.ts`.
2. Text sizes vary by badge size: xsmall/small → body.xsmall, medium/large → body.small. Encode in `badgeTextSizes` map.
3. Icon padding varies by size. Encode in `getBadgeIconPaddingClass()` helper.
4. Children validation: throw `BladeError` if children is empty string.
5. StyledBadge (React styled-component) becomes CSS classes in `badge.module.css`.

## Decisions

| # | Decision | Choice | Rationale |
|---|----------|--------|-----------|
| 1 | Single vs two-layer | Single layer | Only 6 props, no interaction, display-only. No benefit from Base wrapper. |
| 2 | Icon component | Placeholder prop type | Icon component not yet migrated. Accept prop, render comment placeholder. |
| 3 | Box dependency | Use `<div>` with classes | Box not yet migrated. Badge layout is simple enough for plain divs. |

## Story Plan

| # | Story Name | Template | Content |
|---|-----------|----------|---------|
| 1 | Playground | auto | Default args with controls |
| 2 | Sizes | loop | `#each sizes` → render all 4 sizes |
| 3 | Subtle Emphasis | loop | `#each colors` → all 6 colors with `emphasis="subtle"` |
| 4 | Intense Emphasis | loop | `#each colors` → all 6 colors with `emphasis="intense"` |
| 5 | Truncation | custom | Long text in constrained width container |

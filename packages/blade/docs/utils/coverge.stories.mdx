import { Meta } from '@storybook/addon-docs';

<Meta title="Utils/coverage" />

## `getBladeCoverage`

This utility function calculates the blade usage coverage in percentage of the DOM elements on a web page.


```js dark
import { getBladeCoverage } from '@razorpay/blade/coverage';

const { bladeCoverage, totalNodes, bladeNodes } = getBladeCoverage();
```

- `bladeCoverage`: The percentage of blade nodes in the total nodes.
- `totalNodes`: Total number of DOM nodes.
- `bladeNodes`: Number of blade nodes.

## `assertBladeCoverage`

This utility function asserts that the calculated blade coverage meets a specified threshold.

Parameters:
- `page`: Playwright page object.
- `expect`: @playwright/test expect function.
- `threshold` (optional): Minimum threshold for blade coverage (default is 70).

### Example

```js dark
import { test, expect } from '@playwright/test';
import { assertBladeCoverage } from '@razorpay/blade/coverage';

test.describe.parallel('Test Home @flow=home', () => {
  test('should have blade coverage more than 70% @priority=normal', async ({ page }) => {
    await page.goto('/');

    await assertBladeCoverage({ page, expect, threshold: 70 });
  });
});
```

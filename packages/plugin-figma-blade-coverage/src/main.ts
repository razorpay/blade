/**
 * TODO
 * [x] count if the components are blade/local components
 * [] tiny ui to display the information
 *  - show plugin ui config
 *    - what position to show the coverage report
 *    - highlight the non blade nodes?
 *    - highlight the local components?
 *    - highlight non blade styles
 * [] highlight the non blade nodes
 * --release v1--
 * [] count blade vs non blade styles
 * [] highlight non blade styles
 *
 */
import {
  getParentNode,
  traverseNode,
  getSelectedNodesOrAllNodes,
} from '@create-figma-plugin/utilities';

const paymentLightComponents = {
  '164:658027': 'Tooltip',
  '152:37261': 'ActionListItems Group',
  '152:36572': 'ActionListItem/selectionType-Default',
  '152:36740': 'ActionListItem/selectionType-Default Negative',
  '152:37058': 'ActionListItem/selectionType-Multi Select',
  '152:36848': 'ActionListItem/selectionType-Single Select',
  '152:92536': 'Amount',
  '152:100261': 'Bottom Sheet',
  '152:99566': 'Bottomsheet Head - Grab handle container',
  '152:100197': 'BottomSheet/Footer',
  '152:99849': 'BottomSheet/Header',
  '1:459': 'Button',
  '152:99583': 'IconButton',
  '1:3121': 'Link',
  '1:5430': 'Card',
  '1:4997': 'Divider',
  '152:118609': 'Dropdown Menu',
  '152:118429': 'Dropdown/Footer',
  '152:117376': 'Dropdown/Header',
  '152:179591': 'Alert',
  '1:4137': 'Badge',
  '1:3874': 'Counter',
  '152:212734': 'Indicators',
  '152:213043': 'ProgressBar',
  '152:226117': 'Skeleton Block',
  '1:358': 'Spinner',
  '152:226225': 'Checkbox',
  '152:231155': 'Checkbox-Group',
  '152:237747': 'OTP Input',
  '152:251710': 'Password Input',
  '152:256402': 'TextArea Input',
  '152:278295': 'Text Input',
  '152:326252': 'Radio-Group',
  '152:326099': 'Radio-Button',
  '152:332630': 'Select Input',
  '152:336666': 'Switch',
  '152:337263': 'Spacer',
  '152:337809': 'List',
  '152:352539': 'Modal',
  '152:352478': 'Modal/Footer',
  '152:352236': 'Modal/Header',
  '152:360154': 'Code',
  '1:42789': 'Heading',
  '1:42347': 'Text',
  '152:360359': 'Title',
  '152:360668': 'Browsers',
  '152:360926': 'Wordmarks-Logos',
  '152:361226': 'Dashboard / Sidebar',
  '152:179574': 'alert-triangle',
  '152:179582': 'alert-octagon',
  '1:417': 'alert-circle',
  '162:340524': 'alert-only',
  '162:340527': 'qr-code',
  '162:340530': 'bell',
  '162:340533': 'bell-off',
  '162:340536': 'bookmark',
  '152:226150': 'check',
  '162:340540': 'check-square',
  '152:179577': 'check-circle',
  '162:340544': 'clipboard',
  '152:99573': 'close',
  '162:340548': 'command',
  '162:340551': 'copy',
  '162:340554': 'crop',
  '162:340557': 'cut',
  '162:340560': 'download',
  '162:340563': 'download-cloud',
  '162:340566': 'edit-inline',
  '162:340569': 'edit',
  '162:340572': 'edit-compose',
  '162:340575': 'external-link',
  '152:251698': 'eye',
  '162:340579': 'eye-off',
  '162:340582': 'file',
  '162:340585': 'file-text',
  '162:340588': 'file-plus',
  '162:340591': 'file-minus',
  '162:340594': 'filter',
  '162:340597': 'flag',
  '162:340600': 'folder',
  '162:340603': 'globe',
  '162:340606': 'hash',
  '162:340609': 'heart',
  '162:340612': 'help-circle',
  '162:340615': 'home',
  '1:4027': 'info',
  '162:340619': 'log-in',
  '162:340622': 'log-out',
  '162:340625': 'full-screen-enter',
  '162:340628': 'maximize',
  '162:340631': 'menu',
  '162:340634': 'mic',
  '162:340637': 'mic-off',
  '162:340640': 'full-screen-exit',
  '162:340643': 'minimize',
  '162:340646': 'minus',
  '162:340649': 'minus-square',
  '162:340652': 'minus-circle',
  '1:4023': 'more-vertical',
  '162:340656': 'more-horizontal',
  '162:340659': 'move',
  '162:340662': 'pause-circle',
  '162:340665': 'play',
  '162:340668': 'play-circle',
  '162:340671': 'plus',
  '162:340674': 'plus-circle',
  '162:340677': 'plus-square',
  '162:340680': 'power',
  '162:340683': 'refresh',
  '162:340686': 'repeat',
  '162:340689': 'rotate-cw',
  '162:340692': 'rotate-ccw',
  '162:340695': 'save',
  '162:340698': 'search',
  '162:340701': 'settings',
  '162:340704': 'export',
  '162:340707': 'share',
  '162:340710': 'shopping-cart',
  '162:340713': 'shuffle',
  '162:340716': 'stop-circle',
  '162:340719': 'sun',
  '162:340722': 'toggle-left',
  '162:340725': 'toggle-right',
  '162:340343': 'trash',
  '162:340730': 'trash',
  '162:340733': 'list',
  '162:340736': 'link',
  '162:340739': 'star',
  '162:340742': 'lock',
  '162:340745': 'slash',
  '162:340748': 'sliders',
  '162:340751': 'paperclip',
  '162:340754': 'pause',
  '162:340757': 'upload-cloud',
  '162:340760': 'trending-down',
  '162:340763': 'trending-up',
  '162:340766': 'target',
  '162:340769': 'unlock',
  '162:340772': 'tag',
  '162:340775': 'thumbs-up',
  '162:340778': 'thumbs-down',
  '162:340781': 'upload',
  '162:340784': 'video',
  '162:340787': 'x-square',
  '162:340790': 'x-circle',
  '162:340793': 'zap',
  '162:340796': 'zoom-out',
  '162:340799': 'zoom-in',
  '162:341700': 'aperture',
  '162:341703': 'award',
  '162:341706': 'book',
  '162:341709': 'box',
  '162:341712': 'briefcase',
  '162:341715': 'chrome',
  '162:341718': 'circle',
  '162:341721': 'crosshair',
  '162:341724': 'disc',
  '162:341727': 'droplet',
  '162:341730': 'feather',
  '162:341733': 'grid',
  '162:341736': 'layers',
  '162:341739': 'layout',
  '162:341742': 'shopping-cart',
  '162:341745': 'sidebar',
  '162:341748': 'square',
  '162:341751': 'triangle',
  '162:341754': 'life-buoy',
  '1:415': 'loader',
  '162:341758': 'octagon',
  '162:341761': 'package',
  '162:341764': 'percent',
  '162:341767': 'shield',
  '162:341770': 'announcement',
  '162:341773': 'app-store',
  '162:341776': 'coins',
  '162:341779': 'bill',
  '162:341782': 'stamp',
  '162:341785': 'menu-dots',
  '162:341788': 'dot',
  '162:341621': 'ticket',
  '162:341793': 'umbrella',
  '162:341796': 'wind',
  '162:341162': 'align-justify',
  '162:341165': 'align-right',
  '162:341168': 'align-left',
  '162:341171': 'align-center',
  '162:341174': 'anchor',
  '162:341177': 'attachment',
  '162:341180': 'bold',
  '162:341183': 'clipboard',
  '162:341186': 'copy',
  '162:341189': 'scissors',
  '162:341192': 'delete',
  '162:341195': 'edit-inline',
  '162:341198': 'edit-compose',
  '162:341201': 'edit',
  '162:341204': 'external-link',
  '162:341207': 'file-plus',
  '162:341210': 'file-text',
  '162:341213': 'file',
  '162:341216': 'file-minus',
  '162:341219': 'flag',
  '162:341222': 'folder',
  '152:361060': 'grid',
  '162:341226': 'image',
  '162:341229': 'inbox',
  '162:341232': 'italic',
  '162:341235': 'link',
  '162:341238': 'full-screen-exit',
  '162:341241': 'full-screen-enter',
  '162:341244': 'maximize',
  '162:341247': 'minimize',
  '162:341250': 'paperclip',
  '162:341253': 'save',
  '162:341256': 'type',
  '162:341259': 'underline',
  '162:341262': 'film',
  '162:341442': 'airplay',
  '162:341445': 'at-sign',
  '162:341448': 'bluetooth',
  '162:341451': 'camera',
  '162:341454': 'camera-off',
  '162:341457': 'cast',
  '162:341460': 'inbox',
  '162:341463': 'mail',
  '162:341466': 'message-circle',
  '162:341469': 'message-square',
  '162:341472': 'mic',
  '162:341475': 'mic-off',
  '162:341478': 'phone-call',
  '162:341481': 'phone',
  '162:341484': 'phone-outgoing',
  '162:341487': 'phone-off',
  '162:341490': 'phone-missed',
  '162:341493': 'phone-incoming',
  '162:341496': 'phone-forwarded',
  '162:341499': 'send',
  '162:341502': 'mail-open',
  '162:341505': 'power',
  '162:341508': 'radio',
  '162:341511': 'video',
  '162:341514': 'video-off',
  '162:341517': 'voicemail',
  '162:341520': 'wifi',
  '162:341523': 'wifi-off',
  '162:341967': 'arrow-up-left',
  '162:341970': 'arrow-up-right',
  '162:341973': 'arrow-left',
  '162:341976': 'arrow-up',
  '162:341979': 'arrow-down-right',
  '162:341982': 'arrow-down-left',
  '162:341985': 'arrow-down',
  '1:17': 'arrow-right',
  '162:341989': 'chevrons-right',
  '162:341992': 'chevrons-left',
  '162:341995': 'chevrons-down',
  '162:341998': 'chevrons-up',
  '152:332624': 'chevron-up',
  '162:342002': 'chevron-right',
  '152:332620': 'chevron-down',
  '152:99745': 'chevron-left',
  '162:342007': 'corner-up-right',
  '162:342010': 'corner-down-left',
  '162:342013': 'corner-right-up',
  '162:342016': 'corner-right-down',
  '162:342019': 'corner-left-up',
  '162:342022': 'corner-down-right',
  '162:342025': 'corner-up-left',
  '162:342028': 'corner-left-down',
  '162:342098': 'fast-forward',
  '162:342100': 'headphones',
  '162:342102': 'music',
  '162:340376': 'pause',
  '162:340374': 'pause-circle',
  '162:340372': 'play',
  '162:340370': 'play-circle',
  '162:340432': 'shuffle',
  '162:340361': 'repeat',
  '162:342104': 'rewind',
  '162:342106': 'skip-back',
  '162:342108': 'skip-forward',
  '162:340398': 'sliders',
  '162:340410': 'stop-circle',
  '162:342110': 'volume',
  '162:342112': 'volume-mute',
  '162:342114': 'volume-low',
  '162:342116': 'volume-high',
  '152:332628': 'calendar',
  '162:342277': 'clock',
  '162:342280': 'cloud',
  '162:342283': 'cloud-drizzle',
  '162:342286': 'cloud-snow',
  '162:342289': 'cloud-off',
  '162:342292': 'cloud-lightning',
  '162:342295': 'moon',
  '162:342298': 'sunset',
  '162:342301': 'sunrise',
  '162:342304': 'sun',
  '162:342307': 'watch',
  '162:342310': 'cloud-rain',
  '162:342313': 'history',
  '162:342317': 'battery-charging',
  '162:342320': 'battery',
  '162:342323': 'cpu',
  '162:342326': 'monitor',
  '162:342329': 'printer',
  '162:342332': 'radio',
  '162:342335': 'server',
  '162:342338': 'smartphone',
  '162:342341': 'speaker',
  '162:342344': 'tablet',
  '162:342347': 'thermometer',
  '162:342350': 'tv',
  '162:342354': 'codepen',
  '162:342357': 'facebook',
  '162:342360': 'gitlab',
  '162:342363': 'github',
  '162:342366': 'instagram',
  '162:342369': 'pocket',
  '162:342372': 'slack',
  '162:342375': 'twitter',
  '162:342379': 'user-check',
  '152:361062': 'user',
  '162:342383': 'user-x',
  '162:342386': 'user-plus',
  '162:342389': 'user-minus',
  '162:342392': 'users',
  '1:43086': 'activity',
  '1:42754': 'bar-chart-alt',
  '162:342398': 'bar-chart',
  '162:342401': 'pie-chart',
  '162:342404': 'trending-up',
  '162:342407': 'trending-down',
  '162:342411': 'compass',
  '162:342414': 'map',
  '162:342417': 'map-pin',
  '162:342420': 'navigation',
  '152:361210': 'credit-card',
  '162:342425': 'dollars',
  '162:342428': 'rupees',
  '152:361160': 'dashboard',
  '152:361164': 'transactions',
  '152:361168': 'settlements',
  '152:361172': 'invoices',
  '152:361176': 'payment-links',
  '152:361186': 'payment-buttons',
  '152:361180': 'payment-pages',
  '152:361190': 'routes',
  '152:361194': 'subscriptions',
  '162:342441': 'smart-collect',
  '152:361198': 'bank',
  '152:361202': 'customers',
  '152:361206': 'offers',
  '152:361214': 'reports',
  '152:361218': 'my-account',
  '152:361222': 'settings',
  '162:342450': 'razorpay',
  '162:342453': 'razorpayx',
  '162:342456': 'bulk-payouts',
};

const bankingDarkComponents = {
  '164:346217': 'Switch',
  '164:346744': 'Skeleton Block',
  '164:346775': 'Tooltip',
  '164:347686': 'ActionListItems Group',
  '164:347026': 'ActionListItem/selectionType-Default',
  '164:347184': 'ActionListItem/selectionType-Default Negative',
  '164:347483': 'ActionListItem/selectionType-Multi Select',
  '164:347291': 'ActionListItem/selectionType-Single Select',
  '164:392957': 'Amount',
  '164:404587': 'Bottom Sheet',
  '164:399995': 'Bottomsheet Head - Grab handle container',
  '164:404524': 'BottomSheet/Footer',
  '164:404201': 'BottomSheet/Header',
  '164:439090': 'Button',
  '164:455490': 'Link',
  '152:117241': 'IconButton',
  '164:458723': 'Card',
  '164:473141': 'Divider',
  '164:473289': 'Dropdown/Footer',
  '164:473661': 'Dropdown/Header',
  '164:483736': 'Alert',
  '164:517175': 'Badge',
  '164:520355': 'Counter',
  '164:520648': 'Indicators',
  '164:520894': 'ProgressBar',
  '164:533967': 'Spinner',
  '164:534271': 'Checkbox',
  '164:539282': 'Checkbox-Group',
  '164:544583': 'OTP Input',
  '164:558378': 'Password Input',
  '164:563046': 'TextArea Input',
  '164:583370': 'Text Input',
  '164:622581': 'Radio-Group',
  '164:622428': 'Radio-Button',
  '164:629085': 'Select Input',
  '164:633011': 'Spacer',
  '164:633857': 'List',
  '164:648274': 'Modal-Body (NEW)',
  '164:648600': 'Modal',
  '164:648539': 'Modal/Footer',
  '164:648298': 'Modal/Header',
  '164:656757': 'Code',
  '164:656958': 'Heading',
  '164:657241': 'Text',
  '164:657609': 'Title',
  '164:657732': 'Browsers',
  '164:657909': 'Wordmarks',
  '163:344265': 'alert-triangle',
  '163:344268': 'alert-octagon',
  '152:99716': 'alert-circle',
  '163:344272': 'alert-only',
  '163:344275': 'qr-code',
  '163:344278': 'bell',
  '163:344281': 'bell-off',
  '163:344284': 'bookmark',
  '163:344287': 'check',
  '163:344290': 'check-square',
  '163:344293': 'check-circle',
  '163:344296': 'clipboard',
  '152:117215': 'close',
  '163:344300': 'command',
  '163:344303': 'copy',
  '163:344306': 'crop',
  '163:344309': 'cut',
  '163:344312': 'download',
  '163:344315': 'download-cloud',
  '163:344318': 'edit-inline',
  '163:344321': 'edit',
  '163:344324': 'edit-compose',
  '163:344327': 'external-link',
  '163:344330': 'eye',
  '163:344333': 'eye-off',
  '163:344336': 'file',
  '163:344339': 'file-text',
  '163:344342': 'file-plus',
  '163:344345': 'file-minus',
  '163:344348': 'filter',
  '163:344351': 'flag',
  '163:344354': 'folder',
  '163:344357': 'globe',
  '163:344360': 'hash',
  '163:344363': 'heart',
  '163:344366': 'help-circle',
  '163:344369': 'home',
  '163:344372': 'info',
  '163:344375': 'log-in',
  '163:344378': 'log-out',
  '163:344381': 'full-screen-enter',
  '163:344384': 'maximize',
  '163:344387': 'menu',
  '163:344390': 'mic',
  '163:344393': 'mic-off',
  '163:344396': 'full-screen-exit',
  '163:344399': 'minimize',
  '163:344402': 'minus',
  '163:344405': 'minus-square',
  '163:344408': 'minus-circle',
  '163:344411': 'more-vertical',
  '163:344414': 'more-horizontal',
  '163:344417': 'move',
  '163:344420': 'pause-circle',
  '163:344423': 'play',
  '163:344426': 'play-circle',
  '163:344429': 'plus',
  '163:344432': 'plus-circle',
  '163:344435': 'plus-square',
  '163:344438': 'power',
  '163:344441': 'refresh',
  '163:344444': 'repeat',
  '163:344447': 'rotate-cw',
  '163:344450': 'rotate-ccw',
  '163:344453': 'save',
  '163:344456': 'search',
  '163:344459': 'settings',
  '163:344462': 'export',
  '163:344465': 'share',
  '163:344468': 'shopping-cart',
  '163:344471': 'shuffle',
  '163:344474': 'stop-circle',
  '163:344477': 'sun',
  '163:344480': 'toggle-left',
  '163:344483': 'toggle-right',
  '162:340343': 'trash',
  '163:344488': 'trash',
  '163:344491': 'list',
  '163:344494': 'link',
  '163:344497': 'star',
  '163:344500': 'lock',
  '163:344503': 'slash',
  '163:344506': 'sliders',
  '163:344509': 'paperclip',
  '163:344512': 'pause',
  '163:344515': 'upload-cloud',
  '163:344518': 'trending-down',
  '163:344521': 'trending-up',
  '163:344524': 'target',
  '163:344527': 'unlock',
  '163:344530': 'tag',
  '163:344533': 'thumbs-up',
  '163:344536': 'thumbs-down',
  '163:344539': 'upload',
  '163:344542': 'video',
  '163:344545': 'x-square',
  '163:344548': 'x-circle',
  '163:344551': 'zap',
  '163:344554': 'zoom-out',
  '163:344557': 'zoom-in',
  '163:344561': 'align-justify',
  '163:344564': 'align-right',
  '163:344567': 'align-left',
  '163:344570': 'align-center',
  '163:344573': 'anchor',
  '163:344576': 'attachment',
  '163:344579': 'bold',
  '163:344582': 'clipboard',
  '163:344585': 'copy',
  '163:344588': 'scissors',
  '163:344591': 'delete',
  '163:344594': 'edit-inline',
  '163:344597': 'edit-compose',
  '163:344600': 'edit',
  '163:344603': 'external-link',
  '163:344606': 'file-plus',
  '163:344609': 'file-text',
  '163:344612': 'file',
  '163:344615': 'file-minus',
  '163:344618': 'flag',
  '163:344621': 'folder',
  '163:344624': 'grid',
  '163:344627': 'image',
  '163:344630': 'inbox',
  '163:344633': 'italic',
  '163:344636': 'link',
  '163:344639': 'full-screen-exit',
  '163:344642': 'full-screen-enter',
  '163:344645': 'maximize',
  '163:344648': 'minimize',
  '163:344651': 'paperclip',
  '163:344654': 'save',
  '163:344657': 'type',
  '163:344660': 'underline',
  '163:344663': 'film',
  '163:344667': 'airplay',
  '163:344670': 'at-sign',
  '163:344673': 'bluetooth',
  '163:344676': 'camera',
  '163:344679': 'camera-off',
  '163:344682': 'cast',
  '163:344685': 'inbox',
  '163:344688': 'mail',
  '163:344691': 'message-circle',
  '163:344694': 'message-square',
  '163:344697': 'mic',
  '163:344700': 'mic-off',
  '163:344703': 'phone-call',
  '163:344706': 'phone',
  '163:344709': 'phone-outgoing',
  '163:344712': 'phone-off',
  '163:344715': 'phone-missed',
  '163:344718': 'phone-incoming',
  '163:344721': 'phone-forwarded',
  '163:344724': 'send',
  '163:344727': 'power',
  '163:344730': 'radio',
  '163:344733': 'video',
  '163:344736': 'video-off',
  '163:344739': 'voicemail',
  '163:344742': 'wifi',
  '163:344745': 'wifi-off',
  '163:344748': 'mail-open',
  '163:344752': 'aperture',
  '163:344755': 'award',
  '163:344758': 'book',
  '163:344761': 'box',
  '163:344764': 'briefcase',
  '163:344767': 'chrome',
  '163:344770': 'circle',
  '163:344773': 'crosshair',
  '163:344776': 'disc',
  '163:344779': 'droplet',
  '163:344782': 'feather',
  '163:344785': 'grid',
  '163:344788': 'layers',
  '163:344791': 'layout',
  '163:344794': 'shopping-cart',
  '163:344797': 'sidebar',
  '163:344800': 'square',
  '163:344803': 'triangle',
  '163:344806': 'life-buoy',
  '163:344809': 'loader',
  '163:344812': 'octagon',
  '163:344815': 'package',
  '163:344818': 'percent',
  '163:344821': 'shield',
  '163:344824': 'umbrella',
  '163:344827': 'wind',
  '163:344830': 'announcement',
  '163:344833': 'app-store',
  '163:344836': 'coins',
  '163:344839': 'bill',
  '163:344842': 'stamp',
  '163:344845': 'menu-dots',
  '163:344848': 'dot',
  '163:344852': 'arrow-up-left',
  '163:344855': 'arrow-up-right',
  '163:344858': 'arrow-left',
  '163:344861': 'arrow-up',
  '163:344864': 'arrow-down-right',
  '163:344867': 'arrow-down-left',
  '163:344870': 'arrow-down',
  '163:344873': 'arrow-right',
  '163:344876': 'chevrons-right',
  '163:344879': 'chevrons-left',
  '163:344882': 'chevrons-down',
  '163:344885': 'chevrons-up',
  '163:344888': 'chevron-up',
  '163:344891': 'chevron-right',
  '163:344894': 'chevron-down',
  '152:117374': 'chevron-left',
  '163:344898': 'corner-up-right',
  '163:344901': 'corner-down-left',
  '163:344904': 'corner-right-up',
  '163:344907': 'corner-right-down',
  '163:344910': 'corner-left-up',
  '163:344913': 'corner-down-right',
  '163:344916': 'corner-up-left',
  '163:344919': 'corner-left-down',
  '162:342098': 'fast-forward',
  '162:342100': 'headphones',
  '162:342102': 'music',
  '162:340376': 'pause',
  '162:340374': 'pause-circle',
  '162:340372': 'play',
  '162:340370': 'play-circle',
  '162:340432': 'shuffle',
  '162:340361': 'repeat',
  '162:342104': 'rewind',
  '162:342106': 'skip-back',
  '162:342108': 'skip-forward',
  '162:340398': 'sliders',
  '162:340410': 'stop-circle',
  '162:342110': 'volume',
  '162:342112': 'volume-mute',
  '162:342114': 'volume-low',
  '162:342116': 'volume-high',
  '163:344960': 'calendar',
  '163:344963': 'clock',
  '163:344966': 'cloud',
  '163:344969': 'cloud-drizzle',
  '163:344972': 'cloud-snow',
  '163:344975': 'cloud-off',
  '163:344978': 'cloud-lightning',
  '163:344981': 'moon',
  '163:344984': 'sunset',
  '163:344987': 'sunrise',
  '163:344990': 'sun',
  '163:344993': 'watch',
  '163:344996': 'cloud-rain',
  '163:344999': 'history',
  '163:345003': 'battery-charging',
  '163:345006': 'battery',
  '163:345009': 'cpu',
  '163:345012': 'monitor',
  '163:345015': 'printer',
  '163:345018': 'radio',
  '163:345021': 'server',
  '163:345024': 'smartphone',
  '163:345027': 'speaker',
  '163:345030': 'tablet',
  '163:345033': 'thermometer',
  '163:345036': 'tv',
  '163:345040': 'codepen',
  '163:345043': 'facebook',
  '163:345046': 'gitlab',
  '163:345049': 'github',
  '163:345052': 'instagram',
  '163:345055': 'pocket',
  '163:345058': 'slack',
  '163:345061': 'twitter',
  '163:345065': 'user-check',
  '163:345068': 'user',
  '163:345071': 'user-x',
  '163:345074': 'user-plus',
  '163:345077': 'user-minus',
  '163:345080': 'users',
  '163:345084': 'activity',
  '163:345087': 'bar-chart-alt',
  '163:345090': 'bar-chart',
  '163:345093': 'pie-chart',
  '163:345096': 'trending-up',
  '163:345099': 'trending-down',
  '163:345103': 'compass',
  '163:345106': 'map',
  '163:345109': 'map-pin',
  '163:345112': 'navigation',
  '163:346073': 'dashboard',
  '163:346076': 'transactions',
  '163:346079': 'settlements',
  '163:346082': 'invoices',
  '163:346085': 'payment-links',
  '163:346088': 'payment-buttons',
  '163:346091': 'payment-pages',
  '163:346094': 'routes',
  '163:346097': 'subscriptions',
  '163:346100': 'smart-collect',
  '163:346103': 'bank',
  '163:346106': 'customers',
  '163:346109': 'offers',
  '163:346112': 'reports',
  '163:346115': 'my-account',
  '163:346118': 'settings',
  '163:346121': 'razorpay',
  '163:346124': 'razorpayx',
  '163:346127': 'bulk-payouts',
};

const main = async (): void => {
  // once<InsertCodeHandler>('INSERT_CODE', async (code: string) => {
  //   const text = figma.createText();
  //   await loadFontsAsync([text]);
  //   text.characters = code;
  //   figma.currentPage.selection = [text];
  //   figma.viewport.scrollAndZoomIntoView([text]);
  //   figma.closePlugin();
  // });
  const bladeComponentIds = [
    ...Object.keys(paymentLightComponents),
    ...Object.keys(bankingDarkComponents),
  ];
  figma.skipInvisibleInstanceChildren = true;

  const traverseUpTillMainFrame = (node: BaseNode): BaseNode => {
    if (node !== null) {
      if (getParentNode(node)?.type === 'PAGE') {
        return node;
      } else if (node.parent) {
        return traverseUpTillMainFrame(node.parent);
      }
    }
    return node;
  };

  const calculateCoverage = (node: SceneNode): void => {
    let bladeComponents = 0;
    let localComponents = 0;
    let totalNodes = 0;
    const mainFrameCoOrdinates = {
      x: 0,
      y: 0,
    };
    if (getParentNode(node)?.type === 'PAGE') {
      mainFrameCoOrdinates.x = node.x;
      mainFrameCoOrdinates.y = node.y;
    }
    traverseNode(
      node,
      (traversedNode) => {
        if (
          traversedNode.type === 'INSTANCE' &&
          (bladeComponentIds.includes(traversedNode.mainComponent?.parent?.id || '') ||
            bladeComponentIds.includes(traversedNode.mainComponent?.id || ''))
        ) {
          // bladeComponentMap[traversedNode.mainComponent?.parent?.id] = traversedNode.name;
          bladeComponents++;
        } else if (traversedNode.type === 'INSTANCE') {
          localComponents++;
        }
        // exclude the main frame itself from the count to remove false negatives
        if (getParentNode(traversedNode)?.type !== 'PAGE') {
          totalNodes++;
        }
      },
      (traversedNode) => {
        if (
          traversedNode.type === 'INSTANCE' &&
          (bladeComponentIds.includes(traversedNode.mainComponent?.parent?.id || '') ||
            bladeComponentIds.includes(traversedNode.mainComponent?.id || ''))
        ) {
          return true;
        }
        return false;
      },
    );
    // const frame = figma.createFrame();

    // // // Move to (50, 50)
    // frame.x = mainFrameCoOrdinates.x + 150; // 50 because we want to prevent conflict with the frame name
    // frame.y = mainFrameCoOrdinates.y - 100; // 100 is the height of rectangle

    // // // Set size to 200 x 100
    // frame.resize(120, 80);

    // // // Set solid red fill
    // frame.fills = [{ type: 'SOLID', color: { r: 1, g: 1, b: 1 } }];
    // frame.cornerRadius = 8;

    // const textNode = figma.createText();
    // await figma.loadFontAsync(textNode.fontName);
    // textNode.characters = bladeComponents.toString();
    // textNode.fontSize = 18;
    // textNode.fills = [{ type: 'SOLID', color: { r: 0, g: 0, b: 0 } }];

    // frame.appendChild(textNode);

    console.log({
      frameName: node.name,
      bladeComponents,
      localComponents,
      totalNodes,
      bladeCoverage: Number((bladeComponents / totalNodes) * 100).toFixed(2),
    });
  };

  const traverseNodesByPage = (nodes: SceneNode[]): void => {
    for (const node of nodes) {
      if (getParentNode(node)?.type === 'PAGE') {
        // if selection is top level frame then start the coverage count
        calculateCoverage(node);
      } else {
        // if the selection is not the top level frame then traverse up till we find the frame and then start the coverage count
        const mainFrameNode = traverseUpTillMainFrame(node) as SceneNode;
        calculateCoverage(mainFrameNode);
      }
    }
  };

  let nodes: SceneNode[] = [];
  figma.notify('Calculating Coverage', { timeout: Infinity });
  if (figma.currentPage.selection.length > 0) {
    // you already have the selection, run the plugin
    //@ts-expect-error type 'readonly SceneNode[]' is 'readonly' and cannot be assigned to the mutable type 'SceneNode[]'
    nodes = figma.currentPage.selection;
  } else if (figma.currentPage.type === 'PAGE') {
    // plugin is run from page scope but has no selection, so traverse all the nodes and then measure coverage
    nodes = getSelectedNodesOrAllNodes();
  } else {
    // the plugin is not run from a page scope, throw error
    console.error('Please run the plugin by opening a Page or selecting a layer inside a Page');
  }

  if (nodes.length) {
    traverseNodesByPage(nodes);
  }

  figma.closePlugin();
};

export default main;
